function toggleSubmitDisable(t){$btn=t.find(".btn"),function(){return void 0!=$btn.attr("disabled")}()?$btn.removeAttr("disabled").removeClass("disabled"):$btn.attr("disabled","disabled").addClass("disabled")}function onFormSubmitted(t,e){var i=t.serialize(),n="application/x-www-form-urlencoded; charset=UTF-8";t.hasClass("form-multipart")&&(i=new FormData(t[0]),n=!1);var r=t.attr("method"),o=ajax(e,r,i,n);o.done(function(e){localStorage.setItem("message",e.message);var i=t.data("success"),n=t.data("destination");if(void 0!=i)window[i](e);else if(void 0!=n){if(0!=n){for(var r=/#(\S+)#/;match=r.exec(n);){path=match[1].split(".");for(var o=e,a=0;a<path.length;a++)o=o[path[a]];n=n.replace(match[0],void 0==o?"":o),match=r.exec(n)}window.location=n}}else window.location.reload()}),o.fail(function(e){var i=t.data("error");void 0!=i?window[i](e):422==e.status?showFormErrors(t,e):(toggleSubmitDisable(t),showServerError())})}function ajax(t,e,i,n){return $.ajax({url:t,data:i,type:e,processData:!1,contentType:n})}function hideFormErrors(t){t.find(".has-error").each(function(){$(this).removeClass("has-error")})}function showFormErrors(t,e){var i=e.responseJSON.errors;toggleSubmitDisable(t);for(key in i){t.find('[name="'+key+'"]').closest(".form-group").addClass("has-error"),$.notify(i[key],{globalPosition:"top right",className:"error"})}}function showServerError(){$.notify("Server Error! Please Contact Tech Team.",{globalPosition:"top right",className:"error"})}function submitGridForm(t,e,i){$(".cache_form .changed_through_ajax").val("1"),$(".ajax-loader").show(),$.ajax(e,{type:"GET",data:i,cache:!1,success:function(e){t.html(e),$(".ajax-loader").hide()},error:function(t){}})}function addParameter(t,e,i,n){var r;t.indexOf("#")>0?(r=t.indexOf("#"),urlhash=t.substring(t.indexOf("#"),t.length)):(urlhash="",r=t.length),sourceUrl=t.substring(0,r);var o=sourceUrl.split("?"),a="";if(o.length>1)for(var s=o[1].split("&"),l=0;l<s.length;l++){var c=s[l].split("=");n&&c[0]==e||(""===a?a="?":a+="&",a+=c[0]+"="+(c[1]?c[1]:""))}return""===a&&(a="?"),""!==a&&"?"!=a&&(a+="&"),a+=e+"="+(i||""),o[0]+a+urlhash}!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=function(e,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(i),i}:t(jQuery)}(function(t){function e(e,i,n){"string"==typeof n&&(n={className:n}),this.options=x(y,t.isPlainObject(n)?n:{}),this.loadHTML(),this.wrapper=t(p.html),this.options.clickToHide&&this.wrapper.addClass(r+"-hidable"),this.wrapper.data(r,this),this.arrow=this.wrapper.find("."+r+"-arrow"),this.container=this.wrapper.find("."+r+"-container"),this.container.append(this.userContainer),e&&e.length&&(this.elementType=e.attr("type"),this.originalElement=e,this.elem=E(e),this.elem.data(r,this),this.elem.before(this.wrapper)),this.container.hide(),this.run(i)}var i=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},n="notify",r=n+"js",o=n+"!blank",a={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},s=["l","c","r"],l=["t","m","b"],c=["t","b","l","r"],h={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},d=function(e){var i;return i=[],t.each(e.split(/\W+/),function(t,e){var n;if(n=e.toLowerCase().charAt(0),a[n])return i.push(n)}),i},u={},p={name:"core",html:'<div class="'+r+'-wrapper">\n\t<div class="'+r+'-arrow"></div>\n\t<div class="'+r+'-container"></div>\n</div>',css:"."+r+"-corner {\n\tposition: fixed;\n\tmargin: 5px;\n\tz-index: 1050;\n}\n\n."+r+"-corner ."+r+"-wrapper,\n."+r+"-corner ."+r+"-container {\n\tposition: relative;\n\tdisplay: block;\n\theight: inherit;\n\twidth: inherit;\n\tmargin: 3px;\n}\n\n."+r+"-wrapper {\n\tz-index: 1;\n\tposition: absolute;\n\tdisplay: inline-block;\n\theight: 0;\n\twidth: 0;\n}\n\n."+r+"-container {\n\tdisplay: none;\n\tz-index: 1;\n\tposition: absolute;\n}\n\n."+r+"-hidable {\n\tcursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n\tposition: relative;\n}\n\n."+r+"-arrow {\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 0;\n\theight: 0;\n}"},m={"border-radius":["-webkit-","-moz-"]},f=function(t){return u[t]},A=function(t){if(!t)throw"Missing Style name";u[t]&&delete u[t]},g=function(e,i){if(!e)throw"Missing Style name";if(!i)throw"Missing Style definition";if(!i.html)throw"Missing Style HTML";var o=u[e];o&&o.cssElem&&(window.console&&console.warn(n+": overwriting style '"+e+"'"),u[e].cssElem.remove()),i.name=e,u[e]=i;var a="";i.classes&&t.each(i.classes,function(e,n){return a+="."+r+"-"+i.name+"-"+e+" {\n",t.each(n,function(e,i){return m[e]&&t.each(m[e],function(t,n){return a+="\t"+n+e+": "+i+";\n"}),a+="\t"+e+": "+i+";\n"}),a+="}\n"}),i.css&&(a+="/* styles for "+i.name+" */\n"+i.css),a&&(i.cssElem=w(a),i.cssElem.attr("id","notify-"+i.name));var s={},l=t(i.html);v("html",l,s),v("text",l,s),i.fields=s},w=function(e){var i;i=C("style"),i.attr("type","text/css"),t("head").append(i);try{i.html(e)}catch(t){i[0].styleSheet.cssText=e}return i},v=function(e,i,n){var r;return"html"!==e&&(e="text"),r="data-notify-"+e,b(i,"["+r+"]").each(function(){var i;i=t(this).attr(r),i||(i=o),n[i]=e})},b=function(t,e){return t.is(e)?t:t.find(e)},y={clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5},x=function(e,i){var n;return n=function(){},n.prototype=e,t.extend(!0,new n,i)},S=function(e){return t.extend(y,e)},C=function(e){return t("<"+e+"></"+e+">")},k={},E=function(e){var i;return e.is("[type=radio]")&&(i=e.parents("form:first").find("[type=radio]").filter(function(i,n){return t(n).attr("name")===e.attr("name")}),e=i.first()),e},F=function(t,e,i){var n;if("string"==typeof i)i=parseInt(i,10);else if("number"!=typeof i)return;if(!isNaN(i))return n=a[h[e.charAt(0)]],e,void 0!==t[n]&&(e=a[n.charAt(0)],i=-i),void 0===t[e]?t[e]=i:t[e]+=i,null},D=function(t,e,i){if("l"===t||"t"===t)return 0;if("c"===t||"m"===t)return i/2-e/2;if("r"===t||"b"===t)return i-e;throw"Invalid alignment"},j=function(t){return j.e=j.e||C("div"),j.e.text(t).html()};e.prototype.loadHTML=function(){var e;e=this.getStyle(),this.userContainer=t(e.html),this.userFields=e.fields},e.prototype.show=function(t,e){var i,n,r,o,a;if(n=function(i){return function(){if(!t&&!i.elem&&i.destroy(),e)return e()}}(this),a=this.container.parent().parents(":hidden").length>0,r=this.container.add(this.arrow),i=[],a&&t)o="show";else if(a&&!t)o="hide";else if(!a&&t)o=this.options.showAnimation,i.push(this.options.showDuration);else{if(a||t)return n();o=this.options.hideAnimation,i.push(this.options.hideDuration)}return i.push(n),r[o].apply(r,i)},e.prototype.setGlobalPosition=function(){var e=this.getPosition(),i=e[0],n=e[1],o=a[i],s=a[n],l=i+"|"+n,c=k[l];if(!c||!document.body.contains(c[0])){c=k[l]=C("div");var h={};h[o]=0,"middle"===s?h.top="45%":"center"===s?h.left="45%":h[s]=0,c.css(h).addClass(r+"-corner"),t("body").append(c)}return c.prepend(this.wrapper)},e.prototype.setElementPosition=function(){var e,n,r,o,d,u,p,m,f,A,g,w,v,b,y,x,S,C,k,E,j,T,M,R,$,I,H,B;for(I=this.getPosition(),M=I[0],T=I[1],I[2],g=this.elem.position(),m=this.elem.outerHeight(),w=this.elem.outerWidth(),f=this.elem.innerHeight(),A=this.elem.innerWidth(),B=this.wrapper.position(),d=this.container.height(),u=this.container.width(),C=a[M],E=h[M],j=a[E],p={},p[j]="b"===M?m:"r"===M?w:0,F(p,"top",g.top-B.top),F(p,"left",g.left-B.left),H=["top","left"],b=0,x=H.length;b<x;b++)R=H[b],(k=parseInt(this.elem.css("margin-"+R),10))&&F(p,R,k);if(v=Math.max(0,this.options.gap-(this.options.arrowShow?r:0)),F(p,j,v),this.options.arrowShow){for(r=this.options.arrowSize,n=t.extend({},p),e=this.userContainer.css("border-color")||this.userContainer.css("border-top-color")||this.userContainer.css("background-color")||"white",y=0,S=c.length;y<S;y++)R=c[y],$=a[R],R!==E&&(o=$===C?e:"transparent",n["border-"+$]=r+"px solid "+o);F(p,a[E],r),i.call(c,T)>=0&&F(n,a[T],2*r)}else this.arrow.hide();if(i.call(l,M)>=0?(F(p,"left",D(T,u,w)),n&&F(n,"left",D(T,r,A))):i.call(s,M)>=0&&(F(p,"top",D(T,d,m)),n&&F(n,"top",D(T,r,f))),this.container.is(":visible")&&(p.display="block"),this.container.removeAttr("style").css(p),n)return this.arrow.removeAttr("style").css(n)},e.prototype.getPosition=function(){var t,e,n,r,o,a,h,u;if(u=this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition),t=d(u),0===t.length&&(t[0]="b"),e=t[0],i.call(c,e)<0)throw"Must be one of ["+c+"]";return(1===t.length||(n=t[0],i.call(l,n)>=0&&(r=t[1],i.call(s,r)<0))||(o=t[0],i.call(s,o)>=0&&(a=t[1],i.call(l,a)<0)))&&(t[1]=(h=t[0],i.call(s,h)>=0?"m":"l")),2===t.length&&(t[2]=t[1]),t},e.prototype.getStyle=function(t){var e;if(t||(t=this.options.style),t||(t="default"),e=u[t],!e)throw"Missing style: "+t;return e},e.prototype.updateClasses=function(){var e,i;return e=["base"],t.isArray(this.options.className)?e=e.concat(this.options.className):this.options.className&&e.push(this.options.className),i=this.getStyle(),e=t.map(e,function(t){return r+"-"+i.name+"-"+t}).join(" "),this.userContainer.attr("class",e)},e.prototype.run=function(e,i){var n,r,a,s,l;if(t.isPlainObject(i)?t.extend(this.options,i):"string"===t.type(i)&&(this.options.className=i),this.container&&!e)return void this.show(!1);if(this.container||e){r={},t.isPlainObject(e)?r=e:r[o]=e;for(a in r)n=r[a],s=this.userFields[a],s&&("text"===s&&(n=j(n),this.options.breakNewLines&&(n=n.replace(/\n/g,"<br/>"))),l=a===o?"":"="+a,b(this.userContainer,"[data-notify-"+s+l+"]").html(n));this.updateClasses(),this.elem?this.setElementPosition():this.setGlobalPosition(),this.show(!0),this.options.autoHide&&(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(this.show.bind(this,!1),this.options.autoHideDelay))}},e.prototype.destroy=function(){this.wrapper.data(r,null),this.wrapper.remove()},t[n]=function(i,r,o){return i&&i.nodeName||i.jquery?t(i)[n](r,o):(o=r,r=i,new e(null,r,o)),i},t.fn[n]=function(i,n){return t(this).each(function(){var o=E(t(this)).data(r);o&&o.destroy();new e(t(this),i,n)}),this},t.extend(t[n],{defaults:S,addStyle:g,removeStyle:A,pluginOptions:y,getStyle:f,insertCSS:w}),g("bootstrap",{html:"<div>\n<span data-notify-text></span>\n</div>",classes:{base:{"font-weight":"bold",padding:"8px 15px 8px 14px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)","background-color":"#fcf8e3",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","padding-left":"25px","background-repeat":"no-repeat","background-position":"3px 7px"},error:{color:"#B94A48","background-color":"#F2DEDE","border-color":"#EED3D7","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=)"},success:{color:"#468847","background-color":"#DFF0D8","border-color":"#D6E9C6","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==)"},info:{color:"#3A87AD","background-color":"#D9EDF7","border-color":"#BCE8F1","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=)"},warn:{color:"#C09853","background-color":"#FCF8E3","border-color":"#FBEED5","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC)"}}}),t(function(){w(p.css).attr("id","core-notify"),t(document).on("click","."+r+"-hidable",function(e){t(this).trigger("notify-hide")}),t(document).on("notify-hide","."+r+"-wrapper",function(e){var i=t(this).data(r);i&&i.show(!1)})})}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),localStorage.getItem("message")&&($.notify(localStorage.getItem("message"),{globalPosition:"top right",className:"success"}),localStorage.clear()),$('[data-init-plugin="select2"]').each(function(){$(this).select2({tags:!0,minimumInputLength:1,placeholder:$(this).data("placeholder")})}),$(".sidepanel .nav li a").on("click",function(t){t.preventDefault(),$(".nav li").removeClass("active"),$(this).parent().addClass("active"),$('[id*="panel"]').addClass("hidden");var e=$(this).attr("href");$(e).removeClass("hidden"),history.pushState?history.pushState(null,null,e):location.hash=e});var hash=window.location.hash;""!=hash&&($('[id*="panel"]').addClass("hidden"),$(hash).removeClass("hidden"),$(".sidepanel .nav li").removeClass("active"),$('.sidepanel .nav li a[href="'+hash+'"]').parent().addClass("active")),$(".edit-meta").on("click",function(){var t=new Template($(".templates>.image-meta_form")),e=$(this).closest(".image").data("image");t.setData(e),t.replaceIn($("#modal-image_meta")),$("#modal-image_meta").modal("show")}),$(".delete-image").on("click",function(t){var e=$(this).closest(".image").data("id"),i=$(this).closest(".image").data("module"),n=$(this).closest(".image").data("image");t.preventDefault(),$("#confirm-modal").modal().on("click",".delete",function(t){$.ajax({url:"/images/delete",method:"POST",data:{id:e,module:i,image_id:n.id},success:function(){window.location.reload()}})})}),$(".search-tags").select2({ajax:{url:"/search/tags",dataType:"json",data:function(t){return{term:t.term,type:$(this).data("type")}},processResults:function(t){return t=$.map(t,function(t){return t.id=t.id,t.text=t.name,t}),{results:t}}},placeholder:"Search Tags",minimumInputLength:2});var $elem=$(".simplemde");$elem.each(function(t){new SimpleMDE({element:this,showIcons:["table"],forceSync:!0})}),$(".datepicker").datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0}),$(".search-themes").select2({ajax:{url:"/search/themes",dataType:"json",data:function(t){return{term:t.term}},processResults:function(t){return t=$.map(t,function(t){return t.id=t.id,t.text=t.name,t}),{results:t}}},placeholder:"Search Themes",minimumInputLength:2}),$(".search-cities").select2({ajax:{url:"/search/cities",dataType:"json",data:function(t){return{term:t.term}},processResults:function(t){return t=$.map(t,function(t){return t.id=t.id,t.text=t.name,t}),{results:t}}},placeholder:"Search City",minimumInputLength:2}),$(".search-state").select2({ajax:{url:"/search/states",dataType:"json",data:function(t){return{term:t.term,country_id:$(".country").val()}},processResults:function(t){return t=$.map(t,function(t){return t.id=t.id,t.text=t.name,t}),{results:t}}},placeholder:"Search State",minimumInputLength:2,tags:!0}),$(".form-button").on("click",function(){var t=$($(this).data("form"));onFormSubmitted(t,t.prop("action"))}),$(document).on("submit",".form",function(){var t=$(this),e=t.prop("action");return toggleSubmitDisable(t),hideFormErrors(t),onFormSubmitted(t,e),!1});var Template=function(t){var e=null;this.setData=function(i){var n,r=/{#\s*(\S+)\s*#}/;e=t.clone(),e.html(function(t,e){for(;n=r.exec(e);){path=n[1].split(".");for(var o=i,t=0;t<path.length;t++)o=o[path[t]];e=e.replace(n[0],void 0==o?"":o),n=r.exec(e)}return e}),e.find("select").each(function(t){var e=$(this).data("value");void 0!=e&&$(this).val(e)}),e.find("input[type=checkbox]").each(function(t){$(this).data("value")==$(this).val()&&$(this).prop("checked","true")})},this.appendTo=function(t){t.append(e)},this.replaceIn=function(t){t.html(""),this.appendTo(t)},this.getJqueryObject=function(){return e}};$(".grid").on("click",".grid-reset",function(){var t=$(this).closest("form");return t.find("input").val(""),t.find("select").prop("selectedIndex",0),t.submit(),!1}),$(".grid").on("change","select",function(t){return $(this).closest("form").submit(),!1}),$(".grid").on("click",".pagination li a",function(){return submitGridForm($(this).closest(".grid"),$(this).prop("href"),null),!1}),$(".grid").on("click",'thead th small a[title~="Sort"]',function(){var t=$(this).closest(".grid"),e=$(this).prop("href");return""!==e&&(submitGridForm(t,e,null),!1)}),$(".grid").on("submit","form",function(){var t=$(this).serialize();return submitGridForm($(this).closest(".grid"),"",t),!1}),$(".grid").on("change",".export_checkbox",function(){var t=$(this).closest(".grid"),e=t.find(".excel_export a");e.prop("href",e.prop("href").replace("&"+$(this).prop("name")+"="+$(this).val(),"")),e.prop("href",e.prop("href").replace($(this).prop("name")+"="+$(this).val(),"")),this.checked&&e.prop("href",addParameter(e.prop("href"),$(this).prop("name"),$(this).val(),!1))}),$(".grid").on("change",".select_all_checkbox",function(){var t=$(this).closest(".grid").find(".export_checkbox");t.filter(":checked").trigger("click"),this.checked&&t.trigger("click")});